{"remainingRequest":"/Users/matanshushan/Desktop/university/third year/web development/tasks/task3/task 3.2/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/matanshushan/Desktop/university/third year/web development/tasks/task3/task 3.2/client/src/pages/LoginPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/matanshushan/Desktop/university/third year/web development/tasks/task3/task 3.2/client/src/pages/LoginPage.vue","mtime":1599122632000},{"path":"/Users/matanshushan/Desktop/university/third year/web development/tasks/task3/task 3.2/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/matanshushan/Desktop/university/third year/web development/tasks/task3/task 3.2/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/matanshushan/Desktop/university/third year/web development/tasks/task3/task 3.2/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/matanshushan/Desktop/university/third year/web development/tasks/task3/task 3.2/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHJlcXVpcmVkIH0gZnJvbSAidnVlbGlkYXRlL2xpYi92YWxpZGF0b3JzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJMb2dpbiIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHsKICAgICAgICB1c2VybmFtZTogIiIsCiAgICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICAgIHN1Ym1pdEVycm9yOiB1bmRlZmluZWQsCiAgICAgIH0sCiAgICB9OwogIH0sCiAgdmFsaWRhdGlvbnM6IHsKICAgIGZvcm06IHsKICAgICAgdXNlcm5hbWU6IHsKICAgICAgICByZXF1aXJlZCwKICAgICAgfSwKICAgICAgcGFzc3dvcmQ6IHsKICAgICAgICByZXF1aXJlZCwKICAgICAgfSwKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICB2YWxpZGF0ZVN0YXRlKHBhcmFtKSB7CiAgICAgIGNvbnN0IHsgJGRpcnR5LCAkZXJyb3IgfSA9IHRoaXMuJHYuZm9ybVtwYXJhbV07CiAgICAgIHJldHVybiAkZGlydHkgPyAhJGVycm9yIDogbnVsbDsKICAgIH0sCiAgICBhc3luYyBMb2dpbigpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDozMDAxL2xvZ2luIiwgewogICAgICAgICAgdXNlcm5hbWU6IHRoaXMuZm9ybS51c2VybmFtZSwKICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLmZvcm0ucGFzc3dvcmQsCiAgICAgICAgfSk7CgogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHJvb3Quc3RvcmUubG9naW4pOwogICAgICAgIHRoaXMuJHJvb3Quc3RvcmUubG9naW4odGhpcy5mb3JtLnVzZXJuYW1lKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiLyIpLmNhdGNoKCgpID0+IHt9KTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlKTsKICAgICAgICB0aGlzLmZvcm0uc3VibWl0RXJyb3IgPSBlcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICB9CiAgICB9LAogICAgb25Mb2dpbigpIHsKICAgICAgLy8gY29uc29sZS5sb2coImxvZ2luIG1ldGhvZCBjYWxsZWQiKTsKICAgICAgdGhpcy5mb3JtLnN1Ym1pdEVycm9yID0gdW5kZWZpbmVkOwogICAgICB0aGlzLiR2LmZvcm0uJHRvdWNoKCk7CiAgICAgIGlmICh0aGlzLiR2LmZvcm0uJGFueUVycm9yKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIGNvbnNvbGUubG9nKCJsb2dpbiBtZXRob2QgZ28iKTsKCiAgICAgIHRoaXMuTG9naW4oKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["LoginPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"LoginPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"container\">\n    <p></p>\n    <b>\n      <h4 class=\"title\">Login</h4>\n    </b>\n    <p></p>\n    <b-form @submit.prevent=\"onLogin\">\n      <b-form-group\n        id=\"input-group-Username\"\n        label-cols-sm=\"3\"\n        label=\"Username:\"\n        label-for=\"Username\"\n      >\n        <b-form-input\n          id=\"Username\"\n          v-model=\"$v.form.username.$model\"\n          type=\"text\"\n          :state=\"validateState('username')\"\n        ></b-form-input>\n        <b-form-invalid-feedback>\n          Username is required\n        </b-form-invalid-feedback>\n      </b-form-group>\n\n      <b-form-group\n        id=\"input-group-Password\"\n        label-cols-sm=\"3\"\n        label=\"Password:\"\n        label-for=\"Password\"\n      >\n        <b-form-input\n          id=\"Password\"\n          type=\"password\"\n          v-model=\"$v.form.password.$model\"\n          :state=\"validateState('password')\"\n        ></b-form-input>\n        <b-form-invalid-feedback>\n          Password is required\n        </b-form-invalid-feedback>\n      </b-form-group>\n\n      <b-button\n        type=\"submit\"\n        variant=\"primary\"\n        style=\"width:100px;display:block;\"\n        class=\"mx-auto w-100\"\n        >Login</b-button\n      >\n      <div class=\"mt-2\">\n        Do not have an account yet?\n        <router-link to=\"register\"> Register in here</router-link>\n      </div>\n    </b-form>\n    <b-alert\n      class=\"mt-2\"\n      v-if=\"form.submitError\"\n      variant=\"warning\"\n      dismissible\n      show\n    >\n      Login failed: {{ form.submitError }}\n    </b-alert>\n    <!-- <b-card class=\"mt-3\" header=\"Form Data Result\">\n      <pre class=\"m-0\">{{ form }}</pre>\n    </b-card> -->\n  </div>\n</template>\n\n<script>\nimport { required } from \"vuelidate/lib/validators\";\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      form: {\n        username: \"\",\n        password: \"\",\n        submitError: undefined,\n      },\n    };\n  },\n  validations: {\n    form: {\n      username: {\n        required,\n      },\n      password: {\n        required,\n      },\n    },\n  },\n  methods: {\n    validateState(param) {\n      const { $dirty, $error } = this.$v.form[param];\n      return $dirty ? !$error : null;\n    },\n    async Login() {\n      try {\n        const response = await this.axios.post(\"http://localhost:3001/login\", {\n          username: this.form.username,\n          password: this.form.password,\n        });\n\n        console.log(this.$root.store.login);\n        this.$root.store.login(this.form.username);\n        this.$router.push(\"/\").catch(() => {});\n      } catch (err) {\n        console.log(err.response);\n        this.form.submitError = err.response.data.message;\n      }\n    },\n    onLogin() {\n      // console.log(\"login method called\");\n      this.form.submitError = undefined;\n      this.$v.form.$touch();\n      if (this.$v.form.$anyError) {\n        return;\n      }\n      // console.log(\"login method go\");\n\n      this.Login();\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.container {\n  max-width: 400px;\n}\n</style>\n"]}]}