{"remainingRequest":"/Users/matanshushan/Desktop/university/third year/web development/tasks/task3/task 3.2/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/matanshushan/Desktop/university/third year/web development/tasks/task3/task 3.2/client/src/pages/RecipeViewPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/matanshushan/Desktop/university/third year/web development/tasks/task3/task 3.2/client/src/pages/RecipeViewPage.vue","mtime":1602165806726},{"path":"/Users/matanshushan/Desktop/university/third year/web development/tasks/task3/task 3.2/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/matanshushan/Desktop/university/third year/web development/tasks/task3/task 3.2/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/matanshushan/Desktop/university/third year/web development/tasks/task3/task 3.2/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/matanshushan/Desktop/university/third year/web development/tasks/task3/task 3.2/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVjaXBlOiBudWxsLAogICAgICBzYXZlVG9GYXZvcml0ZTogZmFsc2UsCiAgICAgIHdhdGNoUmVjaXBlOiB0cnVlLAogICAgICBpZDogMAogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnVwZGF0ZURhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIHVwZGF0ZURhdGEoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IHJlc3BvbnNlOwogICAgICAgIC8vIHJlc3BvbnNlID0gdGhpcy4kcm91dGUucGFyYW1zLnJlc3BvbnNlOwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHJvdXRlLnBhcmFtcy5yZWNpcGVJZCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHRoaXMuaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMucmVjaXBlSWQ7CiAgICAgICAgICBpZiAodGhpcy5pZCA+IDApIHsKICAgICAgICAgICAgLy9pbmZvIGFib3V0IGNsaWNrZWQgcmVjaXBlCiAgICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5heGlvcy5nZXQoCiAgICAgICAgICAgICAgYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMS9yZWNpcGVzL3JlY2lwZUluZm8vJHt0aGlzLmlkfWAKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIGlmICgkY29va2llcy5nZXQoInNlc3Npb24iKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgbGV0IGFub3RoZXJSZXMgPSBhd2FpdCB0aGlzLmF4aW9zLnBvc3QoCiAgICAgICAgICAgICAgICAiaHR0cDovL2xvY2FsaG9zdDozMDAxL3VzZXJzL2FkZFRvV2F0Y2hUYWJsZS8iLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICByZWNpcGVJZDogdGhpcy5pZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgLy9pbmZvIGFib3V0IGlmIHVzZXIgc2F2ZSByZWNpcGUgdG8gZmF2b3JpdGVzCiAgICAgICAgICAgICAgbGV0IHVzZXJSZWNpcGVEZXRhaWxzID0gYXdhaXQgdGhpcy5heGlvcy5nZXQoCiAgICAgICAgICAgICAgICBgaHR0cDovL2xvY2FsaG9zdDozMDAxL3VzZXJzL3NpbmdsZVJlY2lwZUluZm8vJHt0aGlzLmlkfWAKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIHRoaXMuc2F2ZVRvRmF2b3JpdGUgPSB1c2VyUmVjaXBlRGV0YWlscy5kYXRhLnNhdmVkOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkgdGhpcy4kcm91dGVyLnJlcGxhY2UoIi9Ob3RGb3VuZCIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmF4aW9zLmdldCgKICAgICAgICAgICAgICBgaHR0cDovL2xvY2FsaG9zdDozMDAxL3VzZXJzL215UmVjaXBlSW5mby8ke3RoaXMuaWR9YAogICAgICAgICAgICApOwogICAgICAgICAgICBsZXQgaW1hZ2UgPSBhd2FpdCB0aGlzLmF4aW9zLmdldCgKICAgICAgICAgICAgICBgaHR0cDovL2xvY2FsaG9zdDozMDAxL3VzZXJzL2ltYWdlLyR7cmVzcG9uc2UuZGF0YS5pbWFnZX1gCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuaW1hZ2UgPSAiZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwiICsgaW1hZ2UuZGF0YTsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJkZWJ1Z2dpbmciKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coImVycm9yLnJlc3BvbnNlLnN0YXR1cyIsIGVycm9yLnJlc3BvbnNlLnN0YXR1cyk7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgiL05vdEZvdW5kIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBsZXQgewogICAgICAgICAgYW5hbHl6ZWRJbnN0cnVjdGlvbnMsCiAgICAgICAgICBpbnN0cnVjdGlvbnMsCiAgICAgICAgICBpbmdyZWRpZW50cywKICAgICAgICAgIGFnZ3JlZ2F0ZUxpa2VzLAogICAgICAgICAgcmVhZHlJbk1pbnV0ZXMsCiAgICAgICAgICBpbWFnZSwKICAgICAgICAgIHRpdGxlLAogICAgICAgICAgdmVnYW4sCiAgICAgICAgICB2ZWdldGFyaWFuLAogICAgICAgICAgZ2x1dGVuRnJlZSwKICAgICAgICAgIHNlcnZpbmdzCiAgICAgICAgfSA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgIGxldCBfaW5zdHJ1Y3Rpb25zOwogICAgICAgIGlmICh0aGlzLmlkID4gMCkgewogICAgICAgICAgX2luc3RydWN0aW9ucyA9IGFuYWx5emVkSW5zdHJ1Y3Rpb25zCiAgICAgICAgICAgIC5tYXAoZnN0ZXAgPT4gewogICAgICAgICAgICAgIGZzdGVwLnN0ZXBzWzBdLnN0ZXAgPSBmc3RlcC5uYW1lICsgZnN0ZXAuc3RlcHNbMF0uc3RlcDsKICAgICAgICAgICAgICByZXR1cm4gZnN0ZXAuc3RlcHM7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5yZWR1Y2UoKGEsIGIpID0+IFsuLi5hLCAuLi5iXSwgW10pOwogICAgICAgICAgY29uc29sZS5sb2coImZyb20gc3Bvb25jdWxhciBhcGk6ICIgKyBfaW5zdHJ1Y3Rpb25zKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coYW5hbHl6ZWRJbnN0cnVjdGlvbnMpOwogICAgICAgICAgX2luc3RydWN0aW9ucyA9IGFuYWx5emVkSW5zdHJ1Y3Rpb25zLnN0ZXBzOwogICAgICAgICAgY29uc29sZS5sb2coImZyb20gREI6ICIgKyBfaW5zdHJ1Y3Rpb25zKTsKICAgICAgICB9CgogICAgICAgIGxldCBfcmVjaXBlID0gewogICAgICAgICAgaW5zdHJ1Y3Rpb25zLAogICAgICAgICAgX2luc3RydWN0aW9ucywKICAgICAgICAgIGFuYWx5emVkSW5zdHJ1Y3Rpb25zLAogICAgICAgICAgaW5ncmVkaWVudHMsCiAgICAgICAgICBhZ2dyZWdhdGVMaWtlcywKICAgICAgICAgIHJlYWR5SW5NaW51dGVzLAogICAgICAgICAgaW1hZ2UsCiAgICAgICAgICB0aXRsZSwKICAgICAgICAgIHZlZ2FuLAogICAgICAgICAgdmVnZXRhcmlhbiwKICAgICAgICAgIGdsdXRlbkZyZWUsCiAgICAgICAgICBzZXJ2aW5ncwogICAgICAgIH07CgogICAgICAgIHRoaXMucmVjaXBlID0gX3JlY2lwZTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBmYXZvcml0ZUNoZWNrKCkgewogICAgICB0aGlzLnNhdmVUb0Zhdm9yaXRlID0gdHJ1ZTsKICAgICAgYXdhaXQgdGhpcy5heGlvcy5wb3N0KCJodHRwOi8vbG9jYWxob3N0OjMwMDEvdXNlcnMvYWRkVG9GYXZvcml0ZXMvIiwgewogICAgICAgIHJlY2lwZUlkOiB0aGlzLmlkCiAgICAgIH0pOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["RecipeViewPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RecipeViewPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"container\">\n    <div v-if=\"recipe\">\n      <div class=\"recipe-header mt-3 mb-4\">\n        <h1>{{ recipe.title }}</h1>\n        <img :src=\"recipe.image\" class=\"center\" />\n      </div>\n      <div class=\"recipe-body\">\n        <div class=\"wrapper\">\n          <div class=\"wrapped\">\n            <div class=\"mb-3\">\n              <div>Ready in {{ recipe.readyInMinutes }} minutes</div>\n              <div>Likes: {{ recipe.aggregateLikes }} likes</div>\n              <div class=\"form-check\" v-if=\"$root.store.username\">\n                <input\n                  class=\"form-check-input\"\n                  type=\"checkbox\"\n                  value=\"\"\n                  :checked=\"watchRecipe\"\n                  disabled\n                />\n                <label class=\"form-check-label\" for=\"check0\">\n                  watch Recipe\n                </label>\n              </div>\n              <div class=\"form-check\">\n                <input\n                  class=\"form-check-input\"\n                  type=\"checkbox\"\n                  value=\"\"\n                  :checked=\"recipe.vegan\"\n                  disabled\n                />\n                <label class=\"form-check-label\" for=\"check1\">\n                  Vegan\n                </label>\n              </div>\n              <div class=\"form-check\">\n                <input\n                  class=\"form-check-input\"\n                  type=\"checkbox\"\n                  value=\"\"\n                  :checked=\"recipe.vegetarian\"\n                  disabled\n                />\n                <label class=\"form-check-label\" for=\"check2\">\n                  Vegetarian\n                </label>\n              </div>\n              <div class=\"form-check\">\n                <input\n                  class=\"form-check-input\"\n                  type=\"checkbox\"\n                  value=\"\"\n                  :checked=\"recipe.glutenFree\"\n                  disabled\n                />\n                <label class=\"form-check-label\" for=\"check3\">\n                  GlutenFree\n                </label>\n              </div>\n              <div class=\"form-check\" v-if=\"$root.store.username\">\n                <input\n                  class=\"form-check-input\"\n                  type=\"checkbox\"\n                  value=\"\"\n                  :checked=\"saveToFavorite\"\n                  v-on:click=\"favoriteCheck\"\n                  :disabled=\"saveToFavorite\"\n                  id=\"defaultCheck1\"\n                />\n                <label class=\"form-check-label\" for=\"check4\">\n                  save to favorites\n                </label>\n              </div>\n              <div>Servings amount: {{ recipe.servings }}</div>\n            </div>\n            Ingredients:\n            <ul>\n              <li\n                v-for=\"(r, index) in recipe.ingredients\"\n                :key=\"index + '_' + r.id\"\n              >\n                {{ r }}\n              </li>\n            </ul>\n          </div>\n          <div class=\"wrapped\">\n            Instructions:\n            <ol>\n              <li v-for=\"s in recipe._instructions\" :key=\"s.number\">\n                {{ s.step }}\n              </li>\n            </ol>\n          </div>\n        </div>\n      </div>\n      <!-- <pre>\n      {{ $route.params }}\n      {{ recipe }}\n    </pre\n      > -->\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      recipe: null,\n      saveToFavorite: false,\n      watchRecipe: true,\n      id: 0\n    };\n  },\n  mounted() {\n    this.updateData();\n  },\n  methods: {\n    async updateData() {\n      try {\n        let response;\n        // response = this.$route.params.response;\n        console.log(this.$route.params.recipeId);\n        try {\n          this.id = this.$route.params.recipeId;\n          if (this.id > 0) {\n            //info about clicked recipe\n            response = await this.axios.get(\n              `http://localhost:3001/recipes/recipeInfo/${this.id}`\n            );\n\n            if ($cookies.get(\"session\") != null) {\n              let anotherRes = await this.axios.post(\n                \"http://localhost:3001/users/addToWatchTable/\",\n                {\n                  recipeId: this.id\n                }\n              );\n              //info about if user save recipe to favorites\n              let userRecipeDetails = await this.axios.get(\n                `http://localhost:3001/users/singleRecipeInfo/${this.id}`\n              );\n              this.saveToFavorite = userRecipeDetails.data.saved;\n            }\n            if (response.status !== 200) this.$router.replace(\"/NotFound\");\n          } else {\n            response = await this.axios.get(\n              `http://localhost:3001/users/myRecipeInfo/${this.id}`\n            );\n            let image = await this.axios.get(\n              `http://localhost:3001/users/image/${response.data.image}`\n            );\n            response.data.image = \"data:image/jpeg;base64,\" + image.data;\n            console.log(response.data);\n            console.log(\"debugging\");\n          }\n        } catch (error) {\n          console.log(\"error.response.status\", error.response.status);\n          this.$router.replace(\"/NotFound\");\n          return;\n        }\n\n        let {\n          analyzedInstructions,\n          instructions,\n          ingredients,\n          aggregateLikes,\n          readyInMinutes,\n          image,\n          title,\n          vegan,\n          vegetarian,\n          glutenFree,\n          servings\n        } = response.data;\n\n        let _instructions;\n        if (this.id > 0) {\n          _instructions = analyzedInstructions\n            .map(fstep => {\n              fstep.steps[0].step = fstep.name + fstep.steps[0].step;\n              return fstep.steps;\n            })\n            .reduce((a, b) => [...a, ...b], []);\n          console.log(\"from spooncular api: \" + _instructions);\n        } else {\n          console.log(analyzedInstructions);\n          _instructions = analyzedInstructions.steps;\n          console.log(\"from DB: \" + _instructions);\n        }\n\n        let _recipe = {\n          instructions,\n          _instructions,\n          analyzedInstructions,\n          ingredients,\n          aggregateLikes,\n          readyInMinutes,\n          image,\n          title,\n          vegan,\n          vegetarian,\n          glutenFree,\n          servings\n        };\n\n        this.recipe = _recipe;\n      } catch (error) {\n        console.log(error);\n      }\n    },\n    async favoriteCheck() {\n      this.saveToFavorite = true;\n      await this.axios.post(\"http://localhost:3001/users/addToFavorites/\", {\n        recipeId: this.id\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.wrapper {\n  display: flex;\n}\n.wrapped {\n  width: 50%;\n}\n.center {\n  display: block;\n  margin-left: auto;\n  margin-right: auto;\n  width: 50%;\n}\n/* .recipe-header{\n\n} */\n</style>\n"]}]}